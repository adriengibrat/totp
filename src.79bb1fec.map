{"version":3,"sources":["../node_modules/hyperapp/src/index.js","../node_modules/idb-keyval/dist/idb-keyval.mjs","app/totp/hmac.ts","app/actions/add.ts","app/actions/create.ts","app/actions/del.ts","app/totp/helpers/utils.ts","app/totp/helpers/convert.ts","app/totp/helpers/luhn.ts","app/totp/helpers/truncate.ts","app/totp/helpers/time.ts","app/totp/otp.ts","app/actions/init.ts","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/bundle-loader.js","app/actions/scan.ts","app/actions/swipe.ts","app/actions/tick.ts","app/actions/update.ts","app/actions/index.ts","app/i18n.ts","app/state/index.ts","../node_modules/classcat/src/index.js","../node_modules/tocca/Tocca.js","0","app/components/tile.tsx","app/components/tile-list.tsx","app/view/index.tsx","app/index.tsx","app/install.ts","index.ts"],"names":["h","name","attributes","length","rest","children","arguments","push","node","pop","nodeName","key","app","state","actions","view","container","map","skipRender","rootElement","oldNode","recycleElement","element","toLowerCase","call","childNodes","nodeType","nodeValue","lifecycle","isRecycling","globalState","clone","wiredActions","wireStateToActions","path","action","data","result","getPartialState","then","scheduleRender","setPartialState","concat","resolveNode","render","patch","parent","isSvg","newElement","createElement","document","createTextNode","createElementNS","oncreate","i","appendChild","updateAttribute","insertBefore","removeElement","updateElement","oldAttributes","cb","onupdate","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","getKey","k","newKey","keyedNode","setTimeout","target","source","out","value","slice","eventListener","event","currentTarget","events","type","oldValue","style","cssText","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","done","removeChild","removeChildren","ondestroy","onremove","Store","constructor","dbName","storeName","_dbp","Promise","resolve","reject","openreq","indexedDB","open","onerror","error","onsuccess","onupgradeneeded","createObjectStore","_withIDBStore","callback","db","transaction","oncomplete","onabort","objectStore","store","getDefaultStore","get","req","set","put","del","delete","clear","keys","openKeyCursor","openCursor","continue","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","require","loadBundlesLazy","bundles","Array","isArray","id","code","LazyPromise","loadBundles","all","loadBundle","bundleLoaders","registerBundleLoader","loader","module","load","register","bundle","substring","lastIndexOf","bundleLoader","resolved","executor","promise","prototype","onSuccess","onError","catch","cc","names","len","tmp","hasOwnProperty","tile","timer","confirm","message","cancel","remove","removing","list","scanning","header","logo","title","welcome","add","scan"],"mappings":"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","file":"src.79bb1fec.map","sourceRoot":"../src","sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","class Store {\r\n    constructor(dbName = 'keyval-store', storeName = 'keyval') {\r\n        this.storeName = storeName;\r\n        this._dbp = new Promise((resolve, reject) => {\r\n            const openreq = indexedDB.open(dbName, 1);\r\n            openreq.onerror = () => reject(openreq.error);\r\n            openreq.onsuccess = () => resolve(openreq.result);\r\n            // First time setup: create an empty object store\r\n            openreq.onupgradeneeded = () => {\r\n                openreq.result.createObjectStore(storeName);\r\n            };\r\n        });\r\n    }\r\n    _withIDBStore(type, callback) {\r\n        return this._dbp.then(db => new Promise((resolve, reject) => {\r\n            const transaction = db.transaction(this.storeName, type);\r\n            transaction.oncomplete = () => resolve();\r\n            transaction.onabort = transaction.onerror = () => reject(transaction.error);\r\n            callback(transaction.objectStore(this.storeName));\r\n        }));\r\n    }\r\n}\r\nlet store;\r\nfunction getDefaultStore() {\r\n    if (!store)\r\n        store = new Store();\r\n    return store;\r\n}\r\nfunction get(key, store = getDefaultStore()) {\r\n    let req;\r\n    return store._withIDBStore('readonly', store => {\r\n        req = store.get(key);\r\n    }).then(() => req.result);\r\n}\r\nfunction set(key, value, store = getDefaultStore()) {\r\n    return store._withIDBStore('readwrite', store => {\r\n        store.put(value, key);\r\n    });\r\n}\r\nfunction del(key, store = getDefaultStore()) {\r\n    return store._withIDBStore('readwrite', store => {\r\n        store.delete(key);\r\n    });\r\n}\r\nfunction clear(store = getDefaultStore()) {\r\n    return store._withIDBStore('readwrite', store => {\r\n        store.clear();\r\n    });\r\n}\r\nfunction keys(store = getDefaultStore()) {\r\n    const keys = [];\r\n    return store._withIDBStore('readonly', store => {\r\n        // This would be store.getAllKeys(), but it isn't supported by Edge or Safari.\r\n        // And openKeyCursor isn't supported by Safari.\r\n        (store.openKeyCursor || store.openCursor).call(store).onsuccess = function () {\r\n            if (!this.result)\r\n                return;\r\n            keys.push(this.result.key);\r\n            this.result.continue();\r\n        };\r\n    }).then(() => keys);\r\n}\n\nexport { Store, get, set, del, clear, keys };\n","export const crypto: Crypto =\n\twindow.crypto || (window as any).msCrypto || (window as any).webitCrypto\n\n/**\n * Hash allowed for HMAC SHA algorithm\n */\nexport type HmacSha = 'SHA-1' | 'SHA-256' | 'SHA-384' | 'SHA-512'\n\n/**\n * Key params\n */\nconst NOT_EXTRACTABLE = false\nconst SIGN_ONLY = ['sign']\n\n/**\n * Get HMAC SHA algorithm params from SHA hash name\n */\nfunction hmacSha(algorithm: HmacSha): HmacImportParams {\n\treturn {\n\t\tname: 'HMAC',\n\t\thash: { name: algorithm },\n\t}\n}\n\n/**\n * Generate crypto key of given secret using HMAC SHA algorithm\n */\nexport function hmac({\n\tsecret,\n\talgorithm = 'SHA-1',\n}: {\n\tsecret: ArrayBuffer\n\talgorithm?: HmacSha\n}) {\n\treturn crypto.subtle.importKey(\n\t\t'raw',\n\t\tsecret,\n\t\thmacSha(algorithm),\n\t\tNOT_EXTRACTABLE,\n\t\tSIGN_ONLY,\n\t) as Promise<CryptoKey>\n}\n","import * as db from 'idb-keyval'\n\nimport { Actions } from '../actions'\nimport { State } from '../state'\nimport { TotpAuth } from '../totp/auth'\nimport { hmac } from '../totp/hmac'\n\nfunction id({ issuer, account }: TotpAuth) {\n\treturn `${issuer}:${account}`\n}\n\nexport const add = (otp: TotpAuth) => (_state: State, { init }: Actions) =>\n\thmac(otp)\n\t\t.then((secret: CryptoKey) => db.set(id(otp), { ...otp, secret }))\n\t\t.then(init)\n","export const create = (element: HTMLElement) => {\n\treturn { preview: element.querySelector('canvas') as HTMLCanvasElement }\n}\n","import * as db from 'idb-keyval'\n\nimport { Actions } from '../actions'\nimport { State } from '../state'\n\nexport const del = (key: string) => ({ list }: State, { update }: Actions) =>\n\tdb.del(key).then(() => {\n\t\tlist.splice(list.findIndex(tile => tile.key === key), 1)\n\t\treturn update({ list })\n\t})\n","/**\n * Composition of 2 unary functions\n */\n\nexport function compose<A, B, C>(\n\tf: (b: B) => C,\n\tg: (a: A) => B,\n): ((a: A) => C) {\n\treturn a => f(g(a))\n}\n\n/**\n * Flip function arguments\n */\nexport function flip<A, B, C>(f: (b: B, a: A) => C): ((a: A, b: B) => C) {\n\treturn (a, b) => f(b, a)\n}\n\n/**\n * Pad value with n char\n */\nexport function pad(char: string | number, n: number) {\n\treturn (a: string | number) =>\n\t\t`${Array(n)\n\t\t\t.fill(char)\n\t\t\t.join('')}${a}`.slice(-n)\n}\n\n/**\n * Assert condition or throw error\n */\nexport function assert(condition: boolean, message: string) {\n\tif (!condition) throw Error(message)\n}\n\n/**\n * Curried list mapper\n */\nexport function map<I, R>(mapper: (value: I, index?: number, list?: I[]) => R) {\n\treturn (list: I[]) => list.map(mapper)\n}\n","import { compose, flip, pad } from './utils'\n\n/**\n * Convert integer to hexadecimal\n */\nfunction hexFromNumber(a: number) {\n\treturn a.toString(16)\n}\n\n/**\n * Convert integer to 16 char long zero padded hexadecimal\n */\nconst zeroPaddedHexFromNumber = compose(pad('0', 16), hexFromNumber)\n\n/**\n * Convert hexadecimal to integer\n */\n\nfunction intFromHex(a: string) {\n\treturn parseInt(a, 16)\n}\n\n/**\n * Take 2 characters from a string at given offset\n */\nfunction slice(a: string) {\n\treturn (n: number) => a.substr(n * 2, 2)\n}\n\n/**\n * Convert zero padded hexadecimal to ArrayBuffer\n */\nexport function bufferFromHex(a: string) {\n\treturn Uint8Array.from(\n\t\tArray(a.length / 2),\n\t\tflip(compose(intFromHex, slice(a))),\n\t).buffer as ArrayBuffer\n}\n\n/**\n * Convert integer to ArrayBuffer\n */\nexport const bufferFromNumber = compose(bufferFromHex, zeroPaddedHexFromNumber)\n","/**\n * Luhn numbers\n */\nconst luhns = [0, 2, 4, 6, 8, 1, 3, 5, 7, 9]\n/**\n * Compute Luhn checksum\n */\nexport function luhn(n: number) {\n\tconst digits = n.toString()\n\tlet length = digits.length\n\tlet bit = 1\n\tlet sum = 0\n\twhile (length) {\n\t\tconst digit = ~~digits.charAt(--length)\n\t\tconst num = (bit ^= 1)\n\t\tsum += num ? luhns[digit] : digit\n\t}\n\treturn sum % 10\n}\n","/**\n * Truncate an ArrayBuffer of 20 bytes array to a n digit integer\n * See https://tools.ietf.org/html/rfc4226#section-5.4\n */\n\nexport function truncate(n: number) {\n\treturn function truncate(a: ArrayBuffer) {\n\t\tconst bytes = new Uint8Array(a)\n\t\tconst offset = bytes[19] & 0xf\n\t\treturn (\n\t\t\t(((bytes[offset] & 0x7f) << 24) |\n\t\t\t\t((bytes[offset + 1] & 0xff) << 16) |\n\t\t\t\t((bytes[offset + 2] & 0xff) << 8) |\n\t\t\t\t(bytes[offset + 3] & 0xff)) %\n\t\t\t10 ** n\n\t\t)\n\t}\n}\n","const MS_PER_SECOND = 1000\n\n/**\n * Convert milliseconds to seconds\n */\nexport function seconds(milliseconds: number) {\n\treturn Math.floor(milliseconds / MS_PER_SECOND)\n}\n\n/**\n * Convert seconds to milliseconds\n */\nexport function milliseconds(seconds: number) {\n\treturn seconds * MS_PER_SECOND\n}\n\n/**\n * Count remaining seconds until next period of n seconds for given timestamp\n * by default n is 30 and timestamp is now\n */\nexport function countdown(n = 30) {\n\treturn (timestamp = Date.now()) => n - seconds(timestamp) % n\n}\n\n/**\n * Count periods of n seconds for given timestamp\n * by default n is 30 and timestamp is now\n */\nexport function time(n = 30) {\n\treturn (timestamp = Date.now()) => Math.floor(seconds(timestamp) / n)\n}\n","import { compose, pad } from './helpers/utils'\nimport { bufferFromNumber } from './helpers/convert'\nimport { luhn } from './helpers/luhn'\nimport { truncate } from './helpers/truncate'\nimport { time, countdown } from './helpers/time'\n\nimport { crypto } from './hmac'\n\n/**\n * Append luhn checksum to given number\n */\nfunction appendChecksum(n: number) {\n\treturn n * 10 + luhn(n)\n}\n\ninterface OtpOptions {\n\tsecret: CryptoKey\n\tdigits?: number\n\tchecksum?: boolean\n}\n\nexport interface TotpOptions extends OtpOptions {\n\tperiod?: number\n}\n\nexport interface TotpResult {\n\tcode: string\n\ttimer: number\n}\n\ntype TotpFactory = (timestamp?: number) => Promise<TotpResult>\n\n/**\n * Generate time based one time password from opaque secret key\n */\nexport function totp({\n\tsecret,\n\tdigits = 6,\n\tchecksum = false,\n\tperiod = 30,\n}: TotpOptions): TotpFactory {\n\tconst factor = compose(bufferFromNumber, time(period))\n\tconst format = compose(\n\t\tpad(0, digits),\n\t\tchecksum ? compose(appendChecksum, truncate(digits - 1)) : truncate(digits),\n\t)\n\tconst remain = countdown(period)\n\tconst otp = (timestamp = Date.now()) =>\n\t\tcrypto.subtle\n\t\t\t.sign('HMAC', secret, factor(timestamp))\n\t\t\t.then(format) as Promise<string>\n\tlet _code: string\n\treturn (timestamp = Date.now()): Promise<TotpResult> => {\n\t\tconst timer = remain(timestamp)\n\t\treturn !_code || timer === period\n\t\t\t? otp().then((code: string) => ({ code: (_code = code), timer }))\n\t\t\t: Promise.resolve({ code: _code, timer })\n\t}\n}\n\nexport interface HotpOptions extends OtpOptions {\n\tcounter: number\n}\n\ntype HotpFactory = (count?: number) => Promise<string>\n\n/**\n * Generate event based one time password from opaque secret key\n */\nexport function hotp({\n\tsecret,\n\tcounter,\n\tdigits = 6,\n\tchecksum = false,\n}: HotpOptions): HotpFactory {\n\tconst format = compose(\n\t\tpad(0, digits),\n\t\tchecksum ? compose(appendChecksum, truncate(digits - 1)) : truncate(digits),\n\t)\n\treturn (count: number = counter++): Promise<string> =>\n\t\tcrypto.subtle\n\t\t\t.sign('HMAC', secret, bufferFromNumber(count))\n\t\t\t.then(format) as Promise<string>\n}\n","import * as db from 'idb-keyval'\n\nimport { Actions } from '../actions'\nimport { TileParams } from '../components/tile'\nimport { State } from '../state'\nimport { totp, TotpOptions } from '../totp/otp'\n\ninterface TotpRecord extends TotpOptions {\n\tissuer: string\n\taccount: string\n}\n\nfunction id({ issuer, account }: TotpRecord) {\n\treturn `${issuer}:${account}`\n}\n\nfunction tile(\n\t{ del, swipe }: Partial<Actions>,\n\trecord: TotpRecord,\n): TileParams {\n\tconst { issuer, account } = record\n\tconst key = id(record) // TODO: record should contain key\n\treturn {\n\t\tkey,\n\t\tissuer,\n\t\taccount,\n\t\tcode: '------',\n\t\ttimer: 30,\n\t\totp: totp(record),\n\t\tconfirm: swipe as Actions['swipe'],\n\t\tremoving: false,\n\t\tremove: del as Actions['del'],\n\t}\n}\n\nexport const init = () => (_state: State, { update, del, swipe }: Actions) =>\n\tdb\n\t\t.keys()\n\t\t.then(keys => keys.map(key => db.get<TotpRecord>(key)))\n\t\t.then(list => Promise.all(list))\n\t\t.then(list => list.map(params => tile({ del, swipe }, params)))\n\t\t.then(list => update({ list }))\n// .catch(console.error)\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","import { Actions } from '../actions'\nimport { QRParams } from '../qr'\nimport { State } from '../state'\n\nexport interface ScanAction {\n\t(settings: QRParams): Promise<State>\n}\n\nexport const scan = (settings: QRParams) => (\n\t_state: State,\n\t{ add, update, init }: Actions,\n) => {\n\tconst scanning = (scanning: boolean) => update({ scanning })\n\tscanning(true)\n\treturn import('../qr') // see qr split bundle in fuse.js\n\t\t.then(({ QR }) => {\n\t\t\tconst scan = QR({\n\t\t\t\t...settings,\n\t\t\t\tcallback: (error: string) => console.error(error),\n\t\t\t})\n\t\t\tupdate({\n\t\t\t\tstopScanning: () => {\n\t\t\t\t\tscan.stop()\n\t\t\t\t\tscanning(false)\n\t\t\t\t},\n\t\t\t})\n\t\t\treturn scan\n\t\t})\n\t\t.then(add)\n\t\t.then(init)\n\t\t.then(\n\t\t\t() => scanning(false),\n\t\t\t(error: Error) => {\n\t\t\t\tscanning(false)\n\t\t\t\tthrow error\n\t\t\t},\n\t\t)\n}\n","import { State } from '../state'\n\nexport interface SwipeParams {\n\tkey: string\n\tremoving: boolean\n}\n\nexport const swipe = ({ key, removing }: SwipeParams) => ({ list }: State) => {\n\tconst index = list.findIndex(tile => tile.key === key)\n\tlist.splice(index, 1, { ...list[index], removing })\n\treturn { list: list.slice() }\n}\n","import { Actions } from '../actions'\nimport { TileParams } from '../components/tile'\nimport { State } from '../state'\nimport { TotpResult } from '../totp'\n\nexport const tick = () => ({ list }: State, { update }: Actions) =>\n\tPromise.all(\n\t\tlist.map(tile =>\n\t\t\ttile.otp().then(\n\t\t\t\t({ code, timer }: TotpResult): TileParams => ({\n\t\t\t\t\t...tile,\n\t\t\t\t\tcode,\n\t\t\t\t\ttimer,\n\t\t\t\t}),\n\t\t\t),\n\t\t),\n\t)\n\t\t.then(list => update({ list }))\n\t\t.catch(console.error)\n","import { State } from '../state'\n\nexport const update = (partial: Partial<State>) => (state: State): State => ({\n\t...state,\n\t...partial,\n})\n","import { QRParams } from '../qr'\nimport { State } from '../state'\nimport { TotpAuth } from '../totp/auth'\nimport { add } from './add'\nimport { create } from './create'\nimport { del } from './del'\nimport { init } from './init'\nimport { scan } from './scan'\nimport { swipe, SwipeParams } from './swipe'\nimport { tick } from './tick'\nimport { update } from './update'\n\nexport interface Actions {\n\tadd(otp: TotpAuth): Promise<State>\n\tcreate(element: HTMLElement): State\n\tdel(key: string): Promise<State>\n\tinit(): Promise<State>\n\tscan(settings: QRParams): Promise<State>\n\tswipe(params: SwipeParams): State\n\ttick(): Promise<State>\n\tupdate(partial: Partial<State>): State\n}\n\nexport const actions = {\n\tadd,\n\tcreate,\n\tdel,\n\tinit,\n\tscan,\n\tswipe,\n\ttick,\n\tupdate,\n}\n","export const i18n = (loader: { [locale: string]: () => Promise<{}> }) => {\n\tconst locales = Object.keys(loader)\n\treturn (locale: string) => {\n\t\tconst load = loader[~locales.indexOf(locale) ? locale : locales[0]]\n\t\treturn load().then(messages => ({ locale, messages }))\n\t}\n}\n","import { TileParams } from '../components/tile'\n\nexport type State = typeof state\n\nexport const state = {\n\tpreview: undefined as undefined | HTMLCanvasElement,\n\tscanning: false,\n\tlist: [] as TileParams[],\n\tstopScanning() {\n\t\t/* noop */\n\t},\n\tlocale: '',\n\tmessages: {} as any,\n}\n","var isArray = Array.isArray\n\nexport default function cc(names) {\n  var i,\n    len,\n    tmp,\n    out = \"\",\n    type = typeof names\n\n  if (type === \"string\" || type === \"number\") return names || \"\"\n\n  if (isArray(names) && names.length > 0) {\n    for (i = 0, len = names.length; i < len; i++) {\n      if ((tmp = cc(names[i])) !== \"\") out += (out && \" \") + tmp\n    }\n  } else {\n    for (i in names) {\n      if (names.hasOwnProperty(i) && names[i]) out += (out && \" \") + i\n    }\n  }\n\n  return out\n}\n","/**\n *\n * Version: 2.0.1\n * Author: Gianluca Guarini\n * Contact: gianluca.guarini@gmail.com\n * Website: http://www.gianlucaguarini.com/\n * Twitter: @gianlucaguarini\n *\n * Copyright (c) Gianluca Guarini\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following\n * conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n **/\n/* global jQuery */\n(function(doc, win) {\n  if (typeof doc.createEvent !== 'function') return false // no tap events here\n  // helpers\n  var pointerEvent = function(type) {\n      var lo = type.toLowerCase(),\n        ms = 'MS' + type\n      return navigator.msPointerEnabled ? ms : window.PointerEvent ? lo : false\n    },\n    touchEvent = function(name) {\n      return 'on' + name in window ? name : false\n    },\n    defaults = {\n      useJquery: !win.IGNORE_JQUERY && typeof jQuery !== 'undefined',\n      swipeThreshold: win.SWIPE_THRESHOLD || 100,\n      tapThreshold: win.TAP_THRESHOLD || 150, // range of time where a tap event could be detected\n      dbltapThreshold: win.DBL_TAP_THRESHOLD || 200, // delay needed to detect a double tap\n      longtapThreshold: win.LONG_TAP_THRESHOLD || 1000, // delay needed to detect a long tap\n      tapPrecision: win.TAP_PRECISION / 2 || 60 / 2, // touch events boundaries ( 60px by default )\n      justTouchEvents: win.JUST_ON_TOUCH_DEVICES\n    },\n    // was initially triggered a \"touchstart\" event?\n    wasTouch = false,\n    touchevents = {\n      touchstart: touchEvent('touchstart') || pointerEvent('PointerDown'),\n      touchend: touchEvent('touchend') || pointerEvent('PointerUp'),\n      touchmove: touchEvent('touchmove') || pointerEvent('PointerMove')\n    },\n    isTheSameFingerId = function(e) {\n      return !e.pointerId || typeof pointerId === 'undefined' || e.pointerId === pointerId\n    },\n    setListener = function(elm, events, callback) {\n      var eventsArray = events.split(' '),\n        i = eventsArray.length\n\n      while (i--) {\n        elm.addEventListener(eventsArray[i], callback, false)\n      }\n    },\n    getPointerEvent = function(event) {\n      return event.targetTouches ? event.targetTouches[0] : event\n    },\n    getTimestamp = function () {\n      return new Date().getTime()\n    },\n    sendEvent = function(elm, eventName, originalEvent, data) {\n      var customEvent = doc.createEvent('Event')\n      customEvent.originalEvent = originalEvent\n      data = data || {}\n      data.x = currX\n      data.y = currY\n      data.distance = data.distance\n\n      // jquery\n      if (defaults.useJquery) {\n        customEvent = jQuery.Event(eventName, {originalEvent: originalEvent})\n        jQuery(elm).trigger(customEvent, data)\n      }\n\n      // addEventListener\n      if (customEvent.initEvent) {\n        for (var key in data) {\n          customEvent[key] = data[key]\n        }\n\n        customEvent.initEvent(eventName, true, true)\n        elm.dispatchEvent(customEvent)\n      }\n\n      // detect all the inline events\n      // also on the parent nodes\n      while (elm) {\n        // inline\n        if (elm['on' + eventName])\n          elm['on' + eventName](customEvent)\n        elm = elm.parentNode\n      }\n\n    },\n\n    onTouchStart = function(e) {\n      /**\n       * Skip all the mouse events\n       * events order:\n       * Chrome:\n       *   touchstart\n       *   touchmove\n       *   touchend\n       *   mousedown\n       *   mousemove\n       *   mouseup <- this must come always after a \"touchstart\"\n       *\n       * Safari\n       *   touchstart\n       *   mousedown\n       *   touchmove\n       *   mousemove\n       *   touchend\n       *   mouseup <- this must come always after a \"touchstart\"\n       */\n\n      if (!isTheSameFingerId(e)) return\n\n      pointerId = e.pointerId\n\n      // it looks like it was a touch event!\n      if (e.type !== 'mousedown')\n        wasTouch = true\n\n      // skip this event we don't need to track it now\n      if (e.type === 'mousedown' && wasTouch) return\n\n      var pointer = getPointerEvent(e)\n\n      // caching the current x\n      cachedX = currX = pointer.pageX\n      // caching the current y\n      cachedY = currY = pointer.pageY\n\n      longtapTimer = setTimeout(function() {\n        sendEvent(e.target, 'longtap', e)\n        target = e.target\n      }, defaults.longtapThreshold)\n\n      // we will use these variables on the touchend events\n      timestamp = getTimestamp()\n\n      tapNum++\n\n    },\n    onTouchEnd = function(e) {\n\n      if (!isTheSameFingerId(e)) return\n\n      pointerId = undefined\n\n      // skip the mouse events if previously a touch event was dispatched\n      // and reset the touch flag\n      if (e.type === 'mouseup' && wasTouch) {\n        wasTouch = false\n        return\n      }\n\n      var eventsArr = [],\n        now = getTimestamp(),\n        deltaY = cachedY - currY,\n        deltaX = cachedX - currX\n\n      // clear the previous timer if it was set\n      clearTimeout(dblTapTimer)\n      // kill the long tap timer\n      clearTimeout(longtapTimer)\n\n      if (deltaX <= -defaults.swipeThreshold)\n        eventsArr.push('swiperight')\n\n      if (deltaX >= defaults.swipeThreshold)\n        eventsArr.push('swipeleft')\n\n      if (deltaY <= -defaults.swipeThreshold)\n        eventsArr.push('swipedown')\n\n      if (deltaY >= defaults.swipeThreshold)\n        eventsArr.push('swipeup')\n\n      if (eventsArr.length) {\n        for (var i = 0; i < eventsArr.length; i++) {\n          var eventName = eventsArr[i]\n          sendEvent(e.target, eventName, e, {\n            distance: {\n              x: Math.abs(deltaX),\n              y: Math.abs(deltaY)\n            }\n          })\n        }\n        // reset the tap counter\n        tapNum = 0\n      } else {\n\n        if (\n          cachedX >= currX - defaults.tapPrecision &&\n          cachedX <= currX + defaults.tapPrecision &&\n          cachedY >= currY - defaults.tapPrecision &&\n          cachedY <= currY + defaults.tapPrecision\n        ) {\n          if (timestamp + defaults.tapThreshold - now >= 0)\n          {\n            // Here you get the Tap event\n            sendEvent(e.target, tapNum >= 2 && target === e.target ? 'dbltap' : 'tap', e)\n            target= e.target\n          }\n        }\n\n        // reset the tap counter\n        dblTapTimer = setTimeout(function() {\n          tapNum = 0\n        }, defaults.dbltapThreshold)\n\n      }\n    },\n    onTouchMove = function(e) {\n      if (!isTheSameFingerId(e)) return\n      // skip the mouse move events if the touch events were previously detected\n      if (e.type === 'mousemove' && wasTouch) return\n\n      var pointer = getPointerEvent(e)\n      currX = pointer.pageX\n      currY = pointer.pageY\n    },\n    tapNum = 0,\n    pointerId, currX, currY, cachedX, cachedY, timestamp, target, dblTapTimer, longtapTimer\n\n  //setting the events listeners\n  // we need to debounce the callbacks because some devices multiple events are triggered at same time\n  setListener(doc, touchevents.touchstart + (defaults.justTouchEvents ? '' : ' mousedown'), onTouchStart)\n  setListener(doc, touchevents.touchend + (defaults.justTouchEvents ? '' : ' mouseup'), onTouchEnd)\n  setListener(doc, touchevents.touchmove + (defaults.justTouchEvents ? '' : ' mousemove'), onTouchMove)\n\n  // Configure the tocca default options at any time\n  win.tocca = function(options) {\n    for (var opt in options) {\n      defaults[opt] = options[opt]\n    }\n\n    return defaults\n  }\n})(document, window)\n",null,"import 'tocca'\n\nimport { State } from 'app/state'\nimport cc from 'classcat'\nimport { h } from 'hyperapp'\n\nimport { Actions } from '../actions'\nimport { TotpResult } from '../totp'\nimport style from './tile.scss'\n\nexport interface TileParams {\n\tkey: string\n\tissuer: string\n\taccount: string\n\tcode: string\n\ttimer: number\n\totp: () => Promise<TotpResult>\n\tremoving: boolean\n}\n\nexport const Tile = ({\n\tkey,\n\tissuer,\n\taccount,\n\tcode,\n\ttimer,\n\tremoving,\n}: TileParams) => (state: State, { swipe, del }: Actions) => (\n\t<section\n\t\tkey={key}\n\t\tonswipeleft={() => swipe({ key, removing: true })}\n\t\tclass={cc({\n\t\t\t[style.tile]: true,\n\t\t\t[style.removing]: removing,\n\t\t})}\n\t>\n\t\t<aside\n\t\t\tonswiperight={() => swipe({ key, removing: false })}\n\t\t\tclass={style.confirm}\n\t\t>\n\t\t\t<p>\n\t\t\t\t{state.messages.delWarn}\n\t\t\t\t<small class={style.message}>{state.messages.delMessage}</small>\n\t\t\t</p>\n\t\t\t<a\n\t\t\t\tclass={style.cancel}\n\t\t\t\tonclick={(event: Event) => {\n\t\t\t\t\tswipe({ key, removing: false })\n\t\t\t\t\tevent.stopPropagation()\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{state.messages.delCancel}\n\t\t\t</a>\n\t\t\t<a\n\t\t\t\tclass={style.remove}\n\t\t\t\tonclick={() => del(key)}\n\t\t\t\ttitle={state.messages.delTitle}\n\t\t\t>\n\t\t\t\t⊗\n\t\t\t</a>\n\t\t</aside>\n\t\t<article class={style.view}>\n\t\t\t<h2>\n\t\t\t\t{issuer} {account}\n\t\t\t</h2>\n\t\t\t<span\n\t\t\t\tclass={style.timer}\n\t\t\t\tdata-value={Math.round(101 - (timer * 100) / 30)}\n\t\t\t/>\n\t\t\t<strong>{code.replace(/(.{3})/g, '$1 ')}</strong>\n\t\t</article>\n\t</section>\n)\n","import { h } from 'hyperapp'\n\nimport { Tile, TileParams } from './tile'\nimport style from './tile-list.scss'\n\nexport interface ListParams {\n\tlist: TileParams[]\n}\n\nexport const List = ({ list }: ListParams) => (\n\t<main class={style.list}>\n\t\t{list.map(params => (\n\t\t\t<Tile {...params} />\n\t\t))}\n\t</main>\n)\n","import cc from 'classcat'\nimport { h } from 'hyperapp'\n\nimport logo from '../../assets/logo/vector.svg'\nimport { Actions } from '../actions'\nimport { List } from '../components/tile-list'\nimport { State } from '../state'\nimport style from './view.scss'\n\nexport const view = (state: State, { create, scan }: Actions) => (\n\t<div class={style.app} oncreate={create}>\n\t\t<header class={style.header}>\n\t\t\t<img class={style.logo} src={logo} alt={state.messages.appLogoAlt} />\n\t\t\t<div class={style.title}>\n\t\t\t\t<h1>{state.messages.appTitle}</h1>\n\t\t\t\t<small>{state.messages.appBaseline}</small>\n\t\t\t</div>\n\t\t</header>\n\t\t{state.list.length ? (\n\t\t\t<List list={state.list} />\n\t\t) : (\n\t\t\t<h2 class={style.welcome}>{state.messages.appWelcome}</h2>\n\t\t)}\n\t\t<canvas\n\t\t\tclass={cc({\n\t\t\t\t[style.scan]: true,\n\t\t\t\t[style.scanning]: state.scanning,\n\t\t\t})}\n\t\t/>\n\t\t{state.scanning ? (\n\t\t\t<button\n\t\t\t\tclass={style.add}\n\t\t\t\tonclick={() => state.stopScanning()}\n\t\t\t\ttitle={state.messages.stopScanButton}\n\t\t\t>\n\t\t\t\t&times;\n\t\t\t</button>\n\t\t) : (\n\t\t\t<button\n\t\t\t\tclass={style.add}\n\t\t\t\tonclick={() => scan({ canvas: state.preview })}\n\t\t\t\ttitle={state.messages.scanButton}\n\t\t\t>\n\t\t\t\t+\n\t\t\t</button>\n\t\t)}\n\t</div>\n)\n","import { app } from 'hyperapp'\n\nimport { actions, Actions } from './actions'\nimport { i18n } from './i18n'\nimport { state, State } from './state'\nimport { view } from './view'\n\ninterface I18nAction extends Actions {\n\tsetI18n: (locale: string) => Promise<Partial<State>>\n}\n\nconst i18nActions = Object.assign(actions, {\n\tsetI18n: i18n({\n\t\ten: () => import('./i18n.en.json'),\n\t\tfr: () => import('./i18n.fr.json'),\n\t}),\n})\n\nconst { init, tick, setI18n, update } = app<State, I18nAction>(\n\tstate,\n\ti18nActions,\n\tview,\n\tdocument.body,\n)\n\nconst fonts = (document as any).fonts\ninit()\n\t.then(() => setI18n(navigator.language || 'en').then(update))\n\t.then(tick)\n\t.then(() => (fonts ? fonts.ready : Promise.resolve())) // avoid FOUC\n\t.then(() => {\n\t\tdocument.body.classList.remove('loading')\n\t\tsetInterval(tick, 1000)\n\t})\n","interface InstallEvent extends Event {\n\tuserChoice: Promise<UserChoice>\n}\n\ninterface UserChoice {\n\toutcome: string\n}\n\nwindow.addEventListener('beforeinstallprompt', (event: InstallEvent) => {\n\t// https://developers.google.com/web/fundamentals/getting-started/primers/promises\n\tevent.userChoice.then(({ outcome }) =>\n\t\tconsole.log(\n\t\t\toutcome,\n\t\t\toutcome === 'dismissed'\n\t\t\t\t? 'User cancelled home screen install'\n\t\t\t\t: 'User added to home screen',\n\t\t),\n\t)\n})\n","import './app/index'\nimport './app/install'\n\n// import './app/demo-data'\n\nif ('serviceWorker' in navigator) {\n\tnavigator.serviceWorker.register('/service-worker.js')\n}\n"]}